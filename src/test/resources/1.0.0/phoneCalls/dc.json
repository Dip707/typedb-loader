{
  "defaultConfig": {
    "separator": ',',
    "rowsPerCommit": 100,
    "schemaPath": "src/test/resources/1.0.0/phoneCalls/schema.gql"
  },
  "attributes": {
    "is-in-use": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/is-in-use.csv"
      ],
      "separator": "\t",
      "rowsPerCommit": 50,
      "attribute": {
        "conceptType": "is-in-use",
        "column": "values"
      }
    }
  },
  "entities": {
    "person": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/person.csv",
        "src/test/resources/1.0.0/phoneCalls/person_nextfile.csv"
      ],
      "separator": ",",
      "conceptType": "person",
      "rowsPerCommit": 50,
      "attributes": [
        {
          "conceptType": "first-name",
          "column": "first_name",
          "requireNonEmpty": false
        },
        {
          "conceptType": "last-name",
          "column": "last_name",
          "requireNonEmpty": false
        },
        {
          "conceptType": "phone-number",
          "column": "phone_number",
          "requireNonEmpty": true
        },
        {
          "conceptType": "city",
          "column": "city",
          "requireNonEmpty": false
        },
        {
          "conceptType": "age",
          "column": "age",
          "requireNonEmpty": false
        },
        {
          "conceptType": "nick-name",
          "column": "nick_name",
          "listSeparator": ";",
          "requireNonEmpty": false
        }
      ]
    },
    "company": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/company.csv"
      ],
      "separator": ",",
      "conceptType": "company",
      "rowsPerCommit": 50,
      "attributes": [
        {
          "conceptType": "name",
          "column": "name",
          "requireNonEmpty": true
        }
      ]
    }
  },
  "relations": {
    "contract": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/contract.csv"
      ],
      "separator": ",",
      "conceptType": "contract",
      "rowsPerCommit": 100,
      "players": [
        {
          "roleType": "provider",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "company",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "name",
                "column": "company_name"
              }
            ]
          }
        },
        {
          "roleType": "customer",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "phone-number",
                "column": "person_id",
                "listSeparator": "###"
              }
            ]
          }
        }
      ]
    },
    "call": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/call.csv"
      ],
      "separator": ",",
      "rowsPerCommit": 100,
      "conceptType": "call",
      "players": [
        {
          "roleType": "caller",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "phone-number",
                "column": "caller_id"
              }
            ]
          }
        },
        {
          "roleType": "callee",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "phone-number",
                "column": "callee_id"
              }
            ]
          }
        }
      ],
      "attributes": [
        {
          "conceptType": "started-at",
          "column": "started_at",
          "requireNonEmpty": true
        },
        {
          "conceptType": "duration",
          "column": "duration",
          "requireNonEmpty": true
        }
      ]
    },
    "in-use": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/in-use.csv"
      ],
      "separator": ",",
      "rowsPerCommit": 100,
      "conceptType": "in-use",
      "players": [
        {
          "roleType": "status",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "is-in-use",
            "handler": "attribute",
            "column": "in_use"
          }
        },
        {
          "roleType": "account",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "phone-number",
            "handler": "attribute",
            "column": "pn"
          }
        }
      ]
    },
    "communication-channel": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/communication-channel.csv"
      ],
      "separator": ",",
      "rowsPerCommit": 100,
      "conceptType": "communication-channel",
      "players": [
        {
          "roleType": "peer",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "conceptType": "phone-number",
                "handler": "ownership",
                "column": "peer_1"
              }
            ]
          }
        },
        {
          "roleType": "peer",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "phone-number",
                "column": "peer_2"
              }
            ]
          }
        },
        {
          "roleType": "past-call",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "call",
            "handler": "relation",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "started-at",
                "column": "call_started_at",
                "listSeparator": "###"
              }
            ]
          }
        }
      ]
    },
    "communication-channel-pm": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/communication-channel-pm.csv"
      ],
      "separator": ",",
      "rowsPerCommit": 100,
      "conceptType": "communication-channel",
      "players": [
        {
          "roleType": "peer",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "conceptType": "phone-number",
                "handler": "ownership",
                "column": "peer_1"
              }
            ]
          }
        },
        {
          "roleType": "peer",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "person",
            "handler": "entity",
            "thingGetters": [
              {
                "handler": "ownership",
                "conceptType": "phone-number",
                "column": "peer_2"
              }
            ]
          }
        },
        {
          "roleType": "past-call",
          "requireNonEmpty": true,
          "roleGetter": {
            "conceptType": "call",
            "handler": "relation",
            "thingGetters": [
              {
                "handler": "entity",
                "conceptType": "person",
                "roleType": "caller",
                "thingGetters": [
                  {
                    "handler": "ownership",
                    "conceptType": "phone-number",
                    "column": "peer_1"
                  }
                ]
              },
              {
                "handler": "entity",
                "conceptType": "person",
                "roleType": "callee",
                "thingGetters": [
                  {
                    "handler": "ownership",
                    "conceptType": "phone-number",
                    "column": "peer_2"
                  }
                ]
              }
            ]
          }
        }
      ]
    }
  },
  "appendAttribute": {
    "append-twitter": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/append-twitter-nickname.csv"
      ],
      "rowsPerCommit": 100,
      "separator": ",",
      "thingGetter": {
        "conceptType": "person",
        "handler": "entity",
        "thingGetters": [
          {
            "conceptType": "phone-number",
            "handler": "ownership",
            "column": "phone_number"
          }
        ]
      },
      "attributes": [
        {
          "conceptType": "twitter-username",
          "column": "twitter",
          "listSeparator": "###",
          "requireNonEmpty": true
        },
        {
          "conceptType": "nick-name",
          "column": "nick_name"
        }
      ]
    },
    "append-fakebook": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/append-fb-preprocessed.csv"
      ],
      "rowsPerCommit": 100,
      "separator": ",",
      "thingGetter": {
        "conceptType": "person",
        "handler": "entity",
        "thingGetters": [
          {
            "conceptType": "phone-number",
            "handler": "ownership",
            "column": "phone_number"
          }
        ]
      },
      "attributes": [
        {
          "conceptType": "fakebook-link",
          "column": "fb",
          "requireNonEmpty": true,
          "preprocessorConfig": {
            "type": "regex",
            "parameters": {
              "regexMatch" : "^.*(fakebook\\.com.*)/$",
              "regexReplace": "$1"
            }
          }
        }
      ]
    },
    "append-call-rating": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/append-call-rating.csv"
      ],
      "rowsPerCommit": 100,
      "separator": ",",
      "thingGetter": {
        "conceptType": "call",
        "handler": "relation",
        "thingGetters": [
          {
            "conceptType": "started-at",
            "handler": "ownership",
            "column": "started_at"
          }
        ]
      },
      "attributes": [
        {
          "conceptType": "call-rating",
          "column": "call_rating",
          "requireNonEmpty": true
        }
      ]
    }
  },
  "appendAttributeOrInsertThing": {
    "append-or-insert-person": {
      "dataPaths": [
        "src/test/resources/1.0.0/phoneCalls/person-append-or-insert.csv"
      ],
      "rowsPerCommit": 100,
      "separator": ",",
      "thingGetter": {
        "conceptType": "person",
        "handler": "entity",
        "thingGetters": [
          {
            "conceptType": "phone-number",
            "handler": "ownership",
            "column": "phone_number"
          }
        ]
      },
      "attributes": [
        {
          "conceptType": "first-name",
          "column": "first_name"
        },
        {
          "conceptType": "last-name",
          "column": "last_name"
        },
        {
          "conceptType": "city",
          "column": "city"
        },
        {
          "conceptType": "age",
          "column": "age",
          "requireNonEmpty": true
        },
        {
          "conceptType": "nick-name",
          "column": "nick_name"
        }
      ]
    }
  }
}